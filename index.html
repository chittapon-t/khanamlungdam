<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å - ‡∏Ç‡∏ô‡∏≥‡∏•‡∏∏‡∏á‡∏î‡∏≥ ‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background-color: #fcfaf7; }
        .camping-green { background-color: #1b4332; }
        .camping-brown { background-color: #6d4c41; }
        .card-selected { border: 2px solid #1b4332; background-color: #f0fdf4; }
        .input-focus { outline: none; border-color: #1b4332; ring: 2px; ring-color: #1b4332; }
    </style>
</head>
<body class="pb-32">
    <!-- Loading Overlay -->
    <div id="loading" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center">
        <div class="w-12 h-12 border-4 border-emerald-800 border-t-transparent rounded-full animate-spin"></div>
        <p class="mt-4 text-emerald-800 font-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á...</p>
    </div>

    <!-- Header -->
    <header class="camping-green text-white p-6 rounded-b-3xl shadow-lg">
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-2xl font-bold">‡∏Ç‡∏ô‡∏≥‡∏•‡∏∏‡∏á‡∏î‡∏≥ ‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á</h1>
                <p class="text-emerald-100 text-sm">‡∏≠.‡∏õ‡∏≤‡∏Å‡∏û‡∏∞‡∏¢‡∏π‡∏ô ‡∏à.‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á</p>
            </div>
            <img id="userImg" class="w-12 h-12 rounded-full border-2 border-white/30" src="https://via.placeholder.com/150" alt="Profile">
        </div>
        <div class="mt-4 bg-white/10 p-2 px-4 rounded-full w-fit">
            <span id="userName" class="text-sm">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...</span>
        </div>
    </header>

    <main class="p-4 max-w-md mx-auto space-y-6">
        
        <!-- 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á -->
        <section class="bg-white p-5 rounded-2xl shadow-sm border border-emerald-50 space-y-3">
            <h2 class="font-bold text-emerald-900 flex items-center">
                <span class="bg-emerald-100 p-1 rounded mr-2">üë§</span> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
            </h2>
            <div class="grid grid-cols-1 gap-3">
                <input type="text" id="custName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á" class="w-full border rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none">
                <input type="tel" id="custTel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" class="w-full border rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none">
            </div>
        </section>

        <!-- 2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
        <section class="bg-white p-5 rounded-2xl shadow-sm border border-emerald-50">
            <h2 class="font-bold text-emerald-900 mb-4 flex items-center">
                <span class="bg-emerald-100 p-1 rounded mr-2">üìÖ</span> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
            </h2>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-xs text-gray-500 block mb-1">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô</label>
                    <input type="date" id="checkin" class="w-full border rounded-xl p-3 text-sm outline-none focus:ring-2 focus:ring-emerald-500" onchange="validateDates()">
                </div>
                <div>
                    <label class="text-xs text-gray-500 block mb-1">‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå</label>
                    <input type="date" id="checkout" class="w-full border rounded-xl p-3 text-sm outline-none focus:ring-2 focus:ring-emerald-500" onchange="validateDates()">
                </div>
            </div>
        </section>

        <!-- 3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å -->
        <section class="space-y-3">
            <h2 class="font-bold text-emerald-900 ml-2">üè† ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å (‡∏Å‡∏î‡∏ö‡∏ß‡∏Å‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô)</h2>
            <div id="roomList" class="grid gap-3">
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Render ‡∏î‡πâ‡∏ß‡∏¢ JS -->
            </div>
        </section>

        <!-- 4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
        <section class="space-y-3">
            <h2 class="font-bold text-emerald-900 ml-2">üç≤ ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
            <div id="foodList" class="grid gap-3">
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Render ‡∏î‡πâ‡∏ß‡∏¢ JS -->
            </div>
        </section>

        <!-- 5. ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î -->
        <section class="bg-white p-5 rounded-2xl shadow-sm border border-emerald-50">
            <div class="flex space-x-2">
                <input type="text" id="promoCode" placeholder="‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î" class="flex-1 border rounded-xl p-3 text-sm uppercase outline-none focus:ring-2 focus:ring-emerald-500">
                <button onclick="applyPromo()" class="bg-emerald-100 text-emerald-800 px-4 rounded-xl font-bold text-sm">‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î</button>
            </div>
        </section>

        <!-- 6. ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
        <section id="paymentArea" class="bg-white p-5 rounded-2xl shadow-sm space-y-4 border-2 border-emerald-100">
            <div class="text-center">
                <h2 class="font-bold text-emerald-900 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
                <div class="bg-emerald-50 p-4 rounded-2xl">
                    <p class="text-xs text-gray-500 uppercase font-bold mb-1">‡∏¢‡∏≠‡∏î‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô</p>
                    <p id="depositText" class="text-3xl font-bold text-red-600">‡∏ø0</p>
                    <p class="text-[10px] text-gray-400 mt-1">* ‡∏™‡∏π‡∏ï‡∏£: (‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å-‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î) x 50% + ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
                </div>
            </div>

            <div class="flex justify-center py-2">
                <div class="p-2 bg-white rounded-xl shadow-md border">
                    <img id="qrImg" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=0615924262" class="w-40 h-40">
                </div>
            </div>
            <p class="text-center text-sm font-bold text-emerald-900">‡∏≠‡∏•‡∏á‡∏Å‡∏ï ‡∏ó‡∏ß‡∏µ‡∏ú‡πà‡∏≠‡∏á<br>PromptPay: 061-592-4262</p>

            <div class="space-y-2 pt-2">
                <label class="text-xs font-bold text-gray-600">‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                <input type="file" id="slipInput" accept="image/*" class="w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100">
            </div>

            <div class="flex items-start space-x-2 pt-2 border-t mt-4">
                <input type="checkbox" id="agreeTerms" class="mt-1 w-4 h-4 rounded text-emerald-600">
                <label for="agreeTerms" class="text-[11px] text-gray-500">‡∏â‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏Ç‡∏ô‡∏≥‡∏•‡∏∏‡∏á‡∏î‡∏≥ ‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á</label>
            </div>
        </section>
    </main>

    <!-- Bottom Bar -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t p-4 flex justify-between items-center max-w-md mx-auto z-40 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]">
        <div>
            <p class="text-[10px] text-gray-400 font-bold uppercase">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</p>
            <p id="totalPrice" class="text-xl font-bold text-emerald-800">‡∏ø0</p>
        </div>
        <button onclick="submitBooking()" class="camping-green text-white px-10 py-3 rounded-2xl font-bold shadow-lg active:scale-95 transition-transform">
            ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        </button>
    </div>

    <script>
        const LIFF_ID = '2008863563-tuai5kaC';
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwb9VWt0rQYJ2dJa9jQKM23YRKsx-YReKnqJTiqGRbg26jEMtPP-RzxDbe_BahxUiSu5g/exec';

        const ROOM_DATA = [
            { id: 'R1', name: '‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå‡∏´‡∏ô‡∏≥‡πÇ‡∏õ', minPax: 4, maxPax: 8, basePrice: 1600, tieredPrice: { '4-5': 1600, '6-8': 2200 } },
            { id: 'R2', name: '‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥ 1', minPax: 1, maxPax: 3, basePrice: 1400, tieredPrice: { '1-2': 1400, '3': 1750 } },
            { id: 'R3', name: '‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥ 2', minPax: 1, maxPax: 3, basePrice: 1400, tieredPrice: { '1-2': 1400, '3': 1750 } },
            { id: 'R4', name: '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏Å‡∏£‡∏∞‡πÇ‡∏à‡∏° 1', minPax: 1, maxPax: 4, basePrice: 1200, tieredPrice: { '1-2': 1200, '3-4': 1550 } },
            { id: 'R5', name: '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏Å‡∏£‡∏∞‡πÇ‡∏à‡∏° 2', minPax: 1, maxPax: 4, basePrice: 1200, tieredPrice: { '1-2': 1200, '3-4': 1550 } },
            { id: 'R6', name: '‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏™‡∏ô‡∏≤‡∏° K1', minPax: 1, maxPax: 2, basePrice: 700 },
            { id: 'R7', name: '‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏™‡∏ô‡∏≤‡∏° K2', minPax: 1, maxPax: 2, basePrice: 700 },
            { id: 'R8', name: '‡∏•‡∏≤‡∏ô‡∏Å‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå', minPax: 1, maxPax: 20, pricePerPerson: 150 }
        ];

        const FOOD_DATA = [
            { id: 'F1', name: '‡∏ä‡∏∏‡∏î‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏•‡∏∏‡∏á‡∏î‡∏≥', price: 390 },
            { id: 'F2', name: '‡∏ä‡∏∏‡∏î‡πÑ‡∏Å‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏•‡∏∏‡∏á‡∏î‡∏≥', price: 390 },
            { id: 'F3', name: '‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏ö‡∏π‡∏´‡∏°‡∏π‡∏•‡∏∏‡∏á‡∏î‡∏≥', price: 390 },
            { id: 'F4', name: '‡∏ä‡∏∏‡∏î‡∏ä‡∏≤‡∏ö‡∏π‡πÑ‡∏Å‡πà‡∏•‡∏∏‡∏á‡∏î‡∏≥', price: 390 },
            { id: 'F5', name: '‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô', price: 390 }
        ];

        let state = {
            profile: {},
            selectedRooms: {}, // { id: paxCount }
            selectedFoods: {}, // { id: qty }
            discount: 0,
            isSpecialDate: false
        };

        async function init() {
            try {
                await liff.init({ liffId: LIFF_ID });
                if (!liff.isLoggedIn()) {
                    liff.login();
                } else {
                    const profile = await liff.getProfile();
                    state.profile = profile;
                    document.getElementById('userName').innerText = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${profile.displayName}`;
                    document.getElementById('userImg').src = profile.pictureUrl;
                    
                    renderRooms();
                    renderFoods();
                    document.getElementById('loading').style.display = 'none';
                }
            } catch (err) { console.error(err); }
        }

        function renderRooms() {
            const container = document.getElementById('roomList');
            container.innerHTML = ROOM_DATA.map(room => `
                <div id="card-${room.id}" class="bg-white p-4 rounded-2xl shadow-sm border-2 border-transparent transition-all">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-bold text-emerald-900">${room.name}</h3>
                            <p class="text-[10px] text-gray-400">${room.pricePerPerson ? '150 ‡∏ö./‡∏Ñ‡∏ô' : `‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ${room.maxPax} ‡∏ó‡πà‡∏≤‡∏ô`}</p>
                            <div class="mt-3 flex items-center space-x-3 bg-emerald-50 w-fit rounded-lg p-1">
                                <button onclick="updateRoomPax('${room.id}', -1)" class="w-8 h-8 flex items-center justify-center font-bold text-emerald-700 bg-white rounded-md shadow-sm">-</button>
                                <span id="room-pax-${room.id}" class="text-sm font-bold w-6 text-center">0</span>
                                <button onclick="updateRoomPax('${room.id}', 1)" class="w-8 h-8 flex items-center justify-center font-bold text-emerald-700 bg-white rounded-md shadow-sm">+</button>
                                <span class="text-[10px] text-emerald-600 px-1">‡∏Ñ‡∏ô</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-emerald-700 font-bold" id="price-display-${room.id}">‡∏ø0</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderFoods() {
            const container = document.getElementById('foodList');
            container.innerHTML = FOOD_DATA.map(food => `
                <div class="bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center border border-emerald-50">
                    <div>
                        <h3 class="text-sm font-bold text-gray-700">${food.name}</h3>
                        <p class="text-emerald-600 text-xs font-bold">‡∏ø${food.price}</p>
                    </div>
                    <div class="flex items-center space-x-3 bg-emerald-50 rounded-lg p-1">
                        <button onclick="updateFoodQty('${food.id}', -1)" class="w-8 h-8 flex items-center justify-center font-bold text-emerald-700 bg-white rounded-md shadow-sm">-</button>
                        <span id="food-qty-${food.id}" class="text-sm font-bold w-4 text-center">0</span>
                        <button onclick="updateFoodQty('${food.id}', 1)" class="w-8 h-8 flex items-center justify-center font-bold text-emerald-700 bg-white rounded-md shadow-sm">+</button>
                    </div>
                </div>
            `).join('');
        }

        function updateRoomPax(id, change) {
            const room = ROOM_DATA.find(r => r.id === id);
            let current = state.selectedRooms[id] || 0;
            current = Math.max(0, Math.min(room.maxPax, current + change));
            
            const card = document.getElementById(`card-${id}`);
            if (current > 0) {
                state.selectedRooms[id] = current;
                card.classList.add('card-selected');
            } else {
                delete state.selectedRooms[id];
                card.classList.remove('card-selected');
            }
            document.getElementById(`room-pax-${id}`).innerText = current;
            calculateAll();
        }

        function updateFoodQty(id, change) {
            let current = state.selectedFoods[id] || 0;
            current = Math.max(0, current + change);
            if (current > 0) {
                state.selectedFoods[id] = current;
            } else {
                delete state.selectedFoods[id];
            }
            document.getElementById(`food-qty-${id}`).innerText = current;
            calculateAll();
        }

        function calculateAll() {
            let roomTotal = 0;
            let foodTotal = 0;

            for (let id in state.selectedRooms) {
                const room = ROOM_DATA.find(r => r.id === id);
                const pax = state.selectedRooms[id];
                let price = 0;

                if (room.pricePerPerson) {
                    price = pax * room.pricePerPerson;
                } else if (room.tieredPrice) {
                    for (let range in room.tieredPrice) {
                        const [min, max] = range.includes('-') ? range.split('-').map(Number) : [Number(range), Number(range)];
                        if (max) {
                            if (pax >= min && pax <= max) price = room.tieredPrice[range];
                        } else {
                            if (pax >= min) price = room.tieredPrice[range];
                        }
                    }
                    if (price === 0) price = room.basePrice; 
                } else {
                    price = room.basePrice;
                }
                roomTotal += price;
                document.getElementById(`price-display-${id}`).innerText = `‡∏ø${price.toLocaleString()}`;
            }

            for (let id in state.selectedFoods) {
                const food = FOOD_DATA.find(f => f.id === id);
                foodTotal += (food.price * state.selectedFoods[id]);
            }

            // ‡∏™‡∏π‡∏ï‡∏£‡∏°‡∏±‡∏î‡∏à‡∏≥: (‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å - ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î) * %‡∏°‡∏±‡∏î‡∏à‡∏≥ + ‡∏≠‡∏≤‡∏´‡∏≤‡∏£
            const totalNet = (roomTotal + foodTotal) - state.discount;
            const roomAfterDiscount = Math.max(0, roomTotal - state.discount);
            const depositRate = state.isSpecialDate ? 1.0 : 0.5;
            const depositAmount = (roomAfterDiscount * depositRate) + foodTotal;

            document.getElementById('totalPrice').innerText = `‡∏ø${totalNet.toLocaleString()}`;
            document.getElementById('depositText').innerText = `‡∏ø${depositAmount.toLocaleString()}`;
            
            document.getElementById('qrImg').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=0615924262&amount=${depositAmount}`;
        }

        function validateDates() {
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout').value;
            if (checkin && checkout) {
                const start = new Date(checkin);
                const today = new Date();
                today.setHours(0,0,0,0);
                
                if (start <= today) {
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô');
                    document.getElementById('checkin').value = '';
                    return;
                }
                calculateAll();
            }
        }

        async function applyPromo() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            if (code === 'LUNGDAM100') {
                state.discount = 100;
                alert('‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î 100 ‡∏ö‡∏≤‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
            } else {
                state.discount = 0;
                alert('‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
            calculateAll();
        }

        async function submitBooking() {
            const name = document.getElementById('custName').value;
            const tel = document.getElementById('custTel').value;
            const agree = document.getElementById('agreeTerms').checked;
            const slip = document.getElementById('slipInput').files[0];

            if (!name || !tel) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå');
            if (Object.keys(state.selectedRooms).length === 0) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÅ‡∏´‡πà‡∏á');
            if (!slip) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥');
            if (!agree) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç');

            document.getElementById('loading').style.display = 'flex';
            // Logic ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ GAS
        }

        window.onload = init;
    </script>
</body>
</html>
