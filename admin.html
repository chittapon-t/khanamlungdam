<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Admin - ‡∏Ç‡∏ô‡∏≥‡∏•‡∏∏‡∏á‡∏î‡∏≥</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-4 bg-emerald-50">
<h1 class="text-2xl font-bold mb-4">üìä Dashboard ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h1>
<table class="w-full bg-white shadow rounded">
<thead class="bg-emerald-700 text-white">
<tr><th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏ß‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr>
</thead>
<tbody id="data"></tbody>
</table>

<script>
const API="https://script.google.com/macros/s/AKfycbwb9VWt0rQYJ2dJa9jQKM23YRKsx-YReKnqJTiqGRbg26jEMtPP-RzxDbe_BahxUiSu5g/exec";

fetch(API,{method:"post",body:JSON.stringify({action:"getBookings"})})
.then(r=>r.json()).then(d=>{
  let html="";
  d.forEach(r=>{
    html+=`<tr class="border">
      <td>${r[0]}</td>
      <td>${r[4]}</td>
      <td>${r[16]}</td>
      <td>${r[19]}</td>
      <td>
        <button onclick="confirm('${r[0]}')" class="bg-emerald-600 text-white px-2 py-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
      </td></tr>`;
  });
  document.getElementById("data").innerHTML=html;
});

function confirm(id){
 fetch(API,{method:"post",body:JSON.stringify({action:"updateStatus",id:id,status:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß"})})
 .then(()=>location.reload());
}
</script>
</body>
</html>
